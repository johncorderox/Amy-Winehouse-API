{"ast":null,"code":"'use strict';\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d:\\d\\d)?$/i;\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nvar COMPARE_FORMATS = {\n  date: compareDate,\n  time: compareTime,\n  'date-time': compareDateTime\n};\nvar $dataMetaSchema = {\n  type: 'object',\n  required: ['$data'],\n  properties: {\n    $data: {\n      type: 'string',\n      anyOf: [{\n        format: 'relative-json-pointer'\n      }, {\n        format: 'json-pointer'\n      }]\n    }\n  },\n  additionalProperties: false\n};\n\nmodule.exports = function (minMax) {\n  var keyword = 'format' + minMax;\n  return function defFunc(ajv) {\n    defFunc.definition = {\n      type: 'string',\n      inline: require('./dotjs/_formatLimit'),\n      statements: true,\n      errors: 'full',\n      dependencies: ['format'],\n      metaSchema: {\n        anyOf: [{\n          type: 'string'\n        }, $dataMetaSchema]\n      }\n    };\n    ajv.addKeyword(keyword, defFunc.definition);\n    ajv.addKeyword('formatExclusive' + minMax, {\n      dependencies: ['format' + minMax],\n      metaSchema: {\n        anyOf: [{\n          type: 'boolean'\n        }, $dataMetaSchema]\n      }\n    });\n    extendFormats(ajv);\n    return ajv;\n  };\n};\n\nfunction extendFormats(ajv) {\n  var formats = ajv._formats;\n\n  for (var name in COMPARE_FORMATS) {\n    var format = formats[name]; // the last condition is needed if it's RegExp from another window\n\n    if (_typeof(format) != 'object' || format instanceof RegExp || !format.validate) format = formats[name] = {\n      validate: format\n    };\n    if (!format.compare) format.compare = COMPARE_FORMATS[name];\n  }\n}\n\nfunction compareDate(d1, d2) {\n  if (!(d1 && d2)) return;\n  if (d1 > d2) return 1;\n  if (d1 < d2) return -1;\n  if (d1 === d2) return 0;\n}\n\nfunction compareTime(t1, t2) {\n  if (!(t1 && t2)) return;\n  t1 = t1.match(TIME);\n  t2 = t2.match(TIME);\n  if (!(t1 && t2)) return;\n  t1 = t1[1] + t1[2] + t1[3] + (t1[4] || '');\n  t2 = t2[1] + t2[2] + t2[3] + (t2[4] || '');\n  if (t1 > t2) return 1;\n  if (t1 < t2) return -1;\n  if (t1 === t2) return 0;\n}\n\nfunction compareDateTime(dt1, dt2) {\n  if (!(dt1 && dt2)) return;\n  dt1 = dt1.split(DATE_TIME_SEPARATOR);\n  dt2 = dt2.split(DATE_TIME_SEPARATOR);\n  var res = compareDate(dt1[0], dt2[0]);\n  if (res === undefined) return;\n  return res || compareTime(dt1[1], dt2[1]);\n}","map":null,"metadata":{},"sourceType":"module"}