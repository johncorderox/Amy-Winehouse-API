{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar forEachBail = require(\"./forEachBail\");\n\nfunction loadDescriptionFile(resolver, directory, filenames, resolveContext, callback) {\n  (function findDescriptionFile() {\n    forEachBail(filenames, function (filename, callback) {\n      var descriptionFilePath = resolver.join(directory, filename);\n\n      if (resolver.fileSystem.readJson) {\n        resolver.fileSystem.readJson(descriptionFilePath, function (err, content) {\n          if (err) {\n            if (typeof err.code !== \"undefined\") return callback();\n            return onJson(err);\n          }\n\n          onJson(null, content);\n        });\n      } else {\n        resolver.fileSystem.readFile(descriptionFilePath, function (err, content) {\n          if (err) return callback();\n          var json;\n\n          try {\n            json = JSON.parse(content);\n          } catch (e) {\n            onJson(e);\n          }\n\n          onJson(null, json);\n        });\n      }\n\n      function onJson(err, content) {\n        if (err) {\n          if (resolveContext.log) resolveContext.log(descriptionFilePath + \" (directory description file): \" + err);else err.message = descriptionFilePath + \" (directory description file): \" + err;\n          return callback(err);\n        }\n\n        callback(null, {\n          content: content,\n          directory: directory,\n          path: descriptionFilePath\n        });\n      }\n    }, function (err, result) {\n      if (err) return callback(err);\n\n      if (result) {\n        return callback(null, result);\n      } else {\n        directory = cdUp(directory);\n\n        if (!directory) {\n          return callback();\n        } else {\n          return findDescriptionFile();\n        }\n      }\n    });\n  })();\n}\n\nfunction getField(content, field) {\n  if (!content) return undefined;\n\n  if (Array.isArray(field)) {\n    var current = content;\n\n    for (var j = 0; j < field.length; j++) {\n      if (current === null || _typeof(current) !== \"object\") {\n        current = null;\n        break;\n      }\n\n      current = current[field[j]];\n    }\n\n    if (_typeof(current) === \"object\") {\n      return current;\n    }\n  } else {\n    if (_typeof(content[field]) === \"object\") {\n      return content[field];\n    }\n  }\n}\n\nfunction cdUp(directory) {\n  if (directory === \"/\") return null;\n  var i = directory.lastIndexOf(\"/\"),\n      j = directory.lastIndexOf(\"\\\\\");\n  var p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\n  if (p < 0) return null;\n  return directory.substr(0, p || 1);\n}\n\nexports.loadDescriptionFile = loadDescriptionFile;\nexports.getField = getField;\nexports.cdUp = cdUp;","map":null,"metadata":{},"sourceType":"module"}