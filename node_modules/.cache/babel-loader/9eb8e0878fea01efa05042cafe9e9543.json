{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar path = require(\"path\");\n\nvar OptionsDefaulter = require(\"./OptionsDefaulter\");\n\nvar Template = require(\"./Template\");\n\nvar isProductionLikeMode = function isProductionLikeMode(options) {\n  return options.mode === \"production\" || !options.mode;\n};\n\nvar isWebLikeTarget = function isWebLikeTarget(options) {\n  return options.target === \"web\" || options.target === \"webworker\";\n};\n\nvar getDevtoolNamespace = function getDevtoolNamespace(library) {\n  // if options.output.library is a string\n  if (Array.isArray(library)) {\n    return library.join(\".\");\n  } else if (_typeof(library) === \"object\") {\n    return getDevtoolNamespace(library.root);\n  }\n\n  return library || \"\";\n};\n\nvar WebpackOptionsDefaulter = /*#__PURE__*/function (_OptionsDefaulter) {\n  _inherits(WebpackOptionsDefaulter, _OptionsDefaulter);\n\n  var _super = _createSuper(WebpackOptionsDefaulter);\n\n  function WebpackOptionsDefaulter() {\n    var _this;\n\n    _classCallCheck(this, WebpackOptionsDefaulter);\n\n    _this = _super.call(this);\n\n    _this.set(\"entry\", \"./src\");\n\n    _this.set(\"devtool\", \"make\", function (options) {\n      return options.mode === \"development\" ? \"eval\" : false;\n    });\n\n    _this.set(\"cache\", \"make\", function (options) {\n      return options.mode === \"development\";\n    });\n\n    _this.set(\"context\", process.cwd());\n\n    _this.set(\"target\", \"web\");\n\n    _this.set(\"module\", \"call\", function (value) {\n      return Object.assign({}, value);\n    });\n\n    _this.set(\"module.unknownContextRequest\", \".\");\n\n    _this.set(\"module.unknownContextRegExp\", false);\n\n    _this.set(\"module.unknownContextRecursive\", true);\n\n    _this.set(\"module.unknownContextCritical\", true);\n\n    _this.set(\"module.exprContextRequest\", \".\");\n\n    _this.set(\"module.exprContextRegExp\", false);\n\n    _this.set(\"module.exprContextRecursive\", true);\n\n    _this.set(\"module.exprContextCritical\", true);\n\n    _this.set(\"module.wrappedContextRegExp\", /.*/);\n\n    _this.set(\"module.wrappedContextRecursive\", true);\n\n    _this.set(\"module.wrappedContextCritical\", false);\n\n    _this.set(\"module.strictExportPresence\", false);\n\n    _this.set(\"module.strictThisContextOnImports\", false);\n\n    _this.set(\"module.unsafeCache\", \"make\", function (options) {\n      return !!options.cache;\n    });\n\n    _this.set(\"module.rules\", []);\n\n    _this.set(\"module.defaultRules\", \"make\", function (options) {\n      return [{\n        type: \"javascript/auto\",\n        resolve: {}\n      }, {\n        test: /\\.mjs$/i,\n        type: \"javascript/esm\",\n        resolve: {\n          mainFields: options.target === \"web\" || options.target === \"webworker\" || options.target === \"electron-renderer\" ? [\"browser\", \"main\"] : [\"main\"]\n        }\n      }, {\n        test: /\\.json$/i,\n        type: \"json\"\n      }, {\n        test: /\\.wasm$/i,\n        type: \"webassembly/experimental\"\n      }];\n    });\n\n    _this.set(\"output\", \"call\", function (value, options) {\n      if (typeof value === \"string\") {\n        return {\n          filename: value\n        };\n      } else if (_typeof(value) !== \"object\") {\n        return {};\n      } else {\n        return Object.assign({}, value);\n      }\n    });\n\n    _this.set(\"output.filename\", \"[name].js\");\n\n    _this.set(\"output.chunkFilename\", \"make\", function (options) {\n      var filename = options.output.filename;\n\n      if (typeof filename !== \"function\") {\n        var hasName = filename.includes(\"[name]\");\n        var hasId = filename.includes(\"[id]\");\n        var hasChunkHash = filename.includes(\"[chunkhash]\"); // Anything changing depending on chunk is fine\n\n        if (hasChunkHash || hasName || hasId) return filename; // Elsewise prefix \"[id].\" in front of the basename to make it changing\n\n        return filename.replace(/(^|\\/)([^/]*(?:\\?|$))/, \"$1[id].$2\");\n      }\n\n      return \"[id].js\";\n    });\n\n    _this.set(\"output.webassemblyModuleFilename\", \"[modulehash].module.wasm\");\n\n    _this.set(\"output.library\", \"\");\n\n    _this.set(\"output.hotUpdateFunction\", \"make\", function (options) {\n      return Template.toIdentifier(\"webpackHotUpdate\" + Template.toIdentifier(options.output.library));\n    });\n\n    _this.set(\"output.jsonpFunction\", \"make\", function (options) {\n      return Template.toIdentifier(\"webpackJsonp\" + Template.toIdentifier(options.output.library));\n    });\n\n    _this.set(\"output.chunkCallbackName\", \"make\", function (options) {\n      return Template.toIdentifier(\"webpackChunk\" + Template.toIdentifier(options.output.library));\n    });\n\n    _this.set(\"output.globalObject\", \"make\", function (options) {\n      switch (options.target) {\n        case \"web\":\n        case \"electron-renderer\":\n        case \"node-webkit\":\n          return \"window\";\n\n        case \"webworker\":\n          return \"self\";\n\n        case \"node\":\n        case \"async-node\":\n        case \"electron-main\":\n          return \"global\";\n\n        default:\n          return \"self\";\n      }\n    });\n\n    _this.set(\"output.devtoolNamespace\", \"make\", function (options) {\n      return getDevtoolNamespace(options.output.library);\n    });\n\n    _this.set(\"output.libraryTarget\", \"var\");\n\n    _this.set(\"output.path\", path.join(process.cwd(), \"dist\"));\n\n    _this.set(\"output.pathinfo\", \"make\", function (options) {\n      return options.mode === \"development\";\n    });\n\n    _this.set(\"output.sourceMapFilename\", \"[file].map[query]\");\n\n    _this.set(\"output.hotUpdateChunkFilename\", \"[id].[hash].hot-update.js\");\n\n    _this.set(\"output.hotUpdateMainFilename\", \"[hash].hot-update.json\");\n\n    _this.set(\"output.crossOriginLoading\", false);\n\n    _this.set(\"output.jsonpScriptType\", false);\n\n    _this.set(\"output.chunkLoadTimeout\", 120000);\n\n    _this.set(\"output.hashFunction\", \"md4\");\n\n    _this.set(\"output.hashDigest\", \"hex\");\n\n    _this.set(\"output.hashDigestLength\", 20);\n\n    _this.set(\"output.devtoolLineToLine\", false);\n\n    _this.set(\"output.strictModuleExceptionHandling\", false);\n\n    _this.set(\"node\", \"call\", function (value) {\n      if (typeof value === \"boolean\") {\n        return value;\n      } else {\n        return Object.assign({}, value);\n      }\n    });\n\n    _this.set(\"node.console\", false);\n\n    _this.set(\"node.process\", true);\n\n    _this.set(\"node.global\", true);\n\n    _this.set(\"node.Buffer\", true);\n\n    _this.set(\"node.setImmediate\", true);\n\n    _this.set(\"node.__filename\", \"mock\");\n\n    _this.set(\"node.__dirname\", \"mock\");\n\n    _this.set(\"performance\", \"call\", function (value, options) {\n      if (value === false) return false;\n      if (value === undefined && (!isProductionLikeMode(options) || !isWebLikeTarget(options))) return false;\n      return Object.assign({}, value);\n    });\n\n    _this.set(\"performance.maxAssetSize\", 250000);\n\n    _this.set(\"performance.maxEntrypointSize\", 250000);\n\n    _this.set(\"performance.hints\", \"make\", function (options) {\n      return isProductionLikeMode(options) ? \"warning\" : false;\n    });\n\n    _this.set(\"optimization\", \"call\", function (value) {\n      return Object.assign({}, value);\n    }); // TODO webpack 5: Disable by default in a modes\n\n\n    _this.set(\"optimization.removeAvailableModules\", \"make\", function (options) {\n      return options.mode !== \"development\";\n    });\n\n    _this.set(\"optimization.removeEmptyChunks\", true);\n\n    _this.set(\"optimization.mergeDuplicateChunks\", true);\n\n    _this.set(\"optimization.flagIncludedChunks\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    }); // TODO webpack 5 add `moduleIds: \"named\"` default for development\n    // TODO webpack 5 add `moduleIds: \"size\"` default for production\n    // TODO webpack 5 remove optimization.occurrenceOrder\n\n\n    _this.set(\"optimization.occurrenceOrder\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.sideEffects\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.providedExports\", true);\n\n    _this.set(\"optimization.usedExports\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.concatenateModules\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.splitChunks\", {});\n\n    _this.set(\"optimization.splitChunks.hidePathInfo\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.splitChunks.chunks\", \"async\");\n\n    _this.set(\"optimization.splitChunks.minSize\", \"make\", function (options) {\n      return isProductionLikeMode(options) ? 30000 : 10000;\n    });\n\n    _this.set(\"optimization.splitChunks.minChunks\", 1);\n\n    _this.set(\"optimization.splitChunks.maxAsyncRequests\", \"make\", function (options) {\n      return isProductionLikeMode(options) ? 5 : Infinity;\n    });\n\n    _this.set(\"optimization.splitChunks.automaticNameDelimiter\", \"~\");\n\n    _this.set(\"optimization.splitChunks.automaticNameMaxLength\", 109);\n\n    _this.set(\"optimization.splitChunks.maxInitialRequests\", \"make\", function (options) {\n      return isProductionLikeMode(options) ? 3 : Infinity;\n    });\n\n    _this.set(\"optimization.splitChunks.name\", true);\n\n    _this.set(\"optimization.splitChunks.cacheGroups\", {});\n\n    _this.set(\"optimization.splitChunks.cacheGroups.default\", {\n      automaticNamePrefix: \"\",\n      reuseExistingChunk: true,\n      minChunks: 2,\n      priority: -20\n    });\n\n    _this.set(\"optimization.splitChunks.cacheGroups.vendors\", {\n      automaticNamePrefix: \"vendors\",\n      test: /[\\\\/]node_modules[\\\\/]/,\n      priority: -10\n    });\n\n    _this.set(\"optimization.runtimeChunk\", \"call\", function (value) {\n      if (value === \"single\") {\n        return {\n          name: \"runtime\"\n        };\n      }\n\n      if (value === true || value === \"multiple\") {\n        return {\n          name: function name(entrypoint) {\n            return \"runtime~\".concat(entrypoint.name);\n          }\n        };\n      }\n\n      return value;\n    });\n\n    _this.set(\"optimization.noEmitOnErrors\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.checkWasmTypes\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.mangleWasmImports\", false); // TODO webpack 5 remove optimization.namedModules\n\n\n    _this.set(\"optimization.namedModules\", \"make\", function (options) {\n      return options.mode === \"development\";\n    });\n\n    _this.set(\"optimization.hashedModuleIds\", false); // TODO webpack 5 add `chunkIds: \"named\"` default for development\n    // TODO webpack 5 add `chunkIds: \"size\"` default for production\n    // TODO webpack 5 remove optimization.namedChunks\n\n\n    _this.set(\"optimization.namedChunks\", \"make\", function (options) {\n      return options.mode === \"development\";\n    });\n\n    _this.set(\"optimization.portableRecords\", \"make\", function (options) {\n      return !!(options.recordsInputPath || options.recordsOutputPath || options.recordsPath);\n    });\n\n    _this.set(\"optimization.minimize\", \"make\", function (options) {\n      return isProductionLikeMode(options);\n    });\n\n    _this.set(\"optimization.minimizer\", \"make\", function (options) {\n      return [{\n        apply: function apply(compiler) {\n          // Lazy load the Terser plugin\n          var TerserPlugin = require(\"terser-webpack-plugin\");\n\n          var SourceMapDevToolPlugin = require(\"./SourceMapDevToolPlugin\");\n\n          new TerserPlugin({\n            cache: true,\n            parallel: true,\n            sourceMap: options.devtool && /source-?map/.test(options.devtool) || options.plugins && options.plugins.some(function (p) {\n              return p instanceof SourceMapDevToolPlugin;\n            })\n          }).apply(compiler);\n        }\n      }];\n    });\n\n    _this.set(\"optimization.nodeEnv\", \"make\", function (options) {\n      // TODO: In webpack 5, it should return `false` when mode is `none`\n      return options.mode || \"production\";\n    });\n\n    _this.set(\"resolve\", \"call\", function (value) {\n      return Object.assign({}, value);\n    });\n\n    _this.set(\"resolve.unsafeCache\", true);\n\n    _this.set(\"resolve.modules\", [\"node_modules\"]);\n\n    _this.set(\"resolve.extensions\", [\".wasm\", \".mjs\", \".js\", \".json\"]);\n\n    _this.set(\"resolve.mainFiles\", [\"index\"]);\n\n    _this.set(\"resolve.aliasFields\", \"make\", function (options) {\n      if (options.target === \"web\" || options.target === \"webworker\" || options.target === \"electron-renderer\") {\n        return [\"browser\"];\n      } else {\n        return [];\n      }\n    });\n\n    _this.set(\"resolve.mainFields\", \"make\", function (options) {\n      if (options.target === \"web\" || options.target === \"webworker\" || options.target === \"electron-renderer\") {\n        return [\"browser\", \"module\", \"main\"];\n      } else {\n        return [\"module\", \"main\"];\n      }\n    });\n\n    _this.set(\"resolve.cacheWithContext\", \"make\", function (options) {\n      return Array.isArray(options.resolve.plugins) && options.resolve.plugins.length > 0;\n    });\n\n    _this.set(\"resolve.preferAbsolute\", \"make\", function (options) {\n      return !options.resolve.roots || options.resolve.roots.length === 0;\n    });\n\n    _this.set(\"resolve.ignoreRootsErrors\", \"make\", function (options) {\n      return !options.resolve.roots || options.resolve.roots.length === 0;\n    });\n\n    _this.set(\"resolve.roots\", \"make\", function (options) {\n      return [options.context];\n    });\n\n    _this.set(\"resolveLoader\", \"call\", function (value) {\n      return Object.assign({}, value);\n    });\n\n    _this.set(\"resolveLoader.unsafeCache\", true);\n\n    _this.set(\"resolveLoader.mainFields\", [\"loader\", \"main\"]);\n\n    _this.set(\"resolveLoader.extensions\", [\".js\", \".json\"]);\n\n    _this.set(\"resolveLoader.mainFiles\", [\"index\"]);\n\n    _this.set(\"resolveLoader.cacheWithContext\", \"make\", function (options) {\n      return Array.isArray(options.resolveLoader.plugins) && options.resolveLoader.plugins.length > 0;\n    });\n\n    _this.set(\"infrastructureLogging\", \"call\", function (value) {\n      return Object.assign({}, value);\n    });\n\n    _this.set(\"infrastructureLogging.level\", \"info\");\n\n    _this.set(\"infrastructureLogging.debug\", false);\n\n    return _this;\n  }\n\n  return WebpackOptionsDefaulter;\n}(OptionsDefaulter);\n\nmodule.exports = WebpackOptionsDefaulter;","map":null,"metadata":{},"sourceType":"module"}