{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar path = require(\"path\");\n\nfunction WatcherManager() {\n  this.directoryWatchers = {};\n}\n\nWatcherManager.prototype.getDirectoryWatcher = function (directory, options) {\n  var DirectoryWatcher = require(\"./DirectoryWatcher\");\n\n  options = options || {};\n  var key = directory + \" \" + JSON.stringify(options);\n\n  if (!this.directoryWatchers[key]) {\n    this.directoryWatchers[key] = new DirectoryWatcher(directory, options);\n    this.directoryWatchers[key].on(\"closed\", function () {\n      delete this.directoryWatchers[key];\n    }.bind(this));\n  }\n\n  return this.directoryWatchers[key];\n};\n\nWatcherManager.prototype.watchFile = function watchFile(p, options, startTime) {\n  var directory = path.dirname(p);\n  return this.getDirectoryWatcher(directory, options).watch(p, startTime);\n};\n\nWatcherManager.prototype.watchDirectory = function watchDirectory(directory, options, startTime) {\n  return this.getDirectoryWatcher(directory, options).watch(directory, startTime);\n};\n\nmodule.exports = new WatcherManager();","map":null,"metadata":{},"sourceType":"module"}