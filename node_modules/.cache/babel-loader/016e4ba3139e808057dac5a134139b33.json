{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar Compiler = require(\"./Compiler\");\n\nvar MultiCompiler = require(\"./MultiCompiler\");\n\nvar NodeEnvironmentPlugin = require(\"./node/NodeEnvironmentPlugin\");\n\nvar WebpackOptionsApply = require(\"./WebpackOptionsApply\");\n\nvar WebpackOptionsDefaulter = require(\"./WebpackOptionsDefaulter\");\n\nvar validateSchema = require(\"./validateSchema\");\n\nvar WebpackOptionsValidationError = require(\"./WebpackOptionsValidationError\");\n\nvar webpackOptionsSchema = require(\"../schemas/WebpackOptions.json\");\n\nvar RemovedPluginError = require(\"./RemovedPluginError\");\n\nvar version = require(\"../package.json\").version;\n/** @typedef {import(\"../declarations/WebpackOptions\").WebpackOptions} WebpackOptions */\n\n/**\n * @param {WebpackOptions} options options object\n * @param {function(Error=, Stats=): void=} callback callback\n * @returns {Compiler | MultiCompiler} the compiler object\n */\n\n\nvar webpack = function webpack(options, callback) {\n  var webpackOptionsValidationErrors = validateSchema(webpackOptionsSchema, options);\n\n  if (webpackOptionsValidationErrors.length) {\n    throw new WebpackOptionsValidationError(webpackOptionsValidationErrors);\n  }\n\n  var compiler;\n\n  if (Array.isArray(options)) {\n    compiler = new MultiCompiler(Array.from(options).map(function (options) {\n      return webpack(options);\n    }));\n  } else if (_typeof(options) === \"object\") {\n    options = new WebpackOptionsDefaulter().process(options);\n    compiler = new Compiler(options.context);\n    compiler.options = options;\n    new NodeEnvironmentPlugin({\n      infrastructureLogging: options.infrastructureLogging\n    }).apply(compiler);\n\n    if (options.plugins && Array.isArray(options.plugins)) {\n      var _iterator = _createForOfIteratorHelper(options.plugins),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var plugin = _step.value;\n\n          if (typeof plugin === \"function\") {\n            plugin.call(compiler, compiler);\n          } else {\n            plugin.apply(compiler);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    compiler.hooks.environment.call();\n    compiler.hooks.afterEnvironment.call();\n    compiler.options = new WebpackOptionsApply().process(options, compiler);\n  } else {\n    throw new Error(\"Invalid argument: options\");\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\") {\n      throw new Error(\"Invalid argument: callback\");\n    }\n\n    if (options.watch === true || Array.isArray(options) && options.some(function (o) {\n      return o.watch;\n    })) {\n      var watchOptions = Array.isArray(options) ? options.map(function (o) {\n        return o.watchOptions || {};\n      }) : options.watchOptions || {};\n      return compiler.watch(watchOptions, callback);\n    }\n\n    compiler.run(callback);\n  }\n\n  return compiler;\n};\n\nexports = module.exports = webpack;\nexports.version = version;\nwebpack.WebpackOptionsDefaulter = WebpackOptionsDefaulter;\nwebpack.WebpackOptionsApply = WebpackOptionsApply;\nwebpack.Compiler = Compiler;\nwebpack.MultiCompiler = MultiCompiler;\nwebpack.NodeEnvironmentPlugin = NodeEnvironmentPlugin; // @ts-ignore Global @this directive is not supported\n\nwebpack.validate = validateSchema.bind(this, webpackOptionsSchema);\nwebpack.validateSchema = validateSchema;\nwebpack.WebpackOptionsValidationError = WebpackOptionsValidationError;\n\nvar exportPlugins = function exportPlugins(obj, mappings) {\n  for (var _i = 0, _Object$keys = Object.keys(mappings); _i < _Object$keys.length; _i++) {\n    var name = _Object$keys[_i];\n    Object.defineProperty(obj, name, {\n      configurable: false,\n      enumerable: true,\n      get: mappings[name]\n    });\n  }\n};\n\nexportPlugins(exports, {\n  AutomaticPrefetchPlugin: function AutomaticPrefetchPlugin() {\n    return require(\"./AutomaticPrefetchPlugin\");\n  },\n  BannerPlugin: function BannerPlugin() {\n    return require(\"./BannerPlugin\");\n  },\n  CachePlugin: function CachePlugin() {\n    return require(\"./CachePlugin\");\n  },\n  ContextExclusionPlugin: function ContextExclusionPlugin() {\n    return require(\"./ContextExclusionPlugin\");\n  },\n  ContextReplacementPlugin: function ContextReplacementPlugin() {\n    return require(\"./ContextReplacementPlugin\");\n  },\n  DefinePlugin: function DefinePlugin() {\n    return require(\"./DefinePlugin\");\n  },\n  Dependency: function Dependency() {\n    return require(\"./Dependency\");\n  },\n  DllPlugin: function DllPlugin() {\n    return require(\"./DllPlugin\");\n  },\n  DllReferencePlugin: function DllReferencePlugin() {\n    return require(\"./DllReferencePlugin\");\n  },\n  EnvironmentPlugin: function EnvironmentPlugin() {\n    return require(\"./EnvironmentPlugin\");\n  },\n  EvalDevToolModulePlugin: function EvalDevToolModulePlugin() {\n    return require(\"./EvalDevToolModulePlugin\");\n  },\n  EvalSourceMapDevToolPlugin: function EvalSourceMapDevToolPlugin() {\n    return require(\"./EvalSourceMapDevToolPlugin\");\n  },\n  ExtendedAPIPlugin: function ExtendedAPIPlugin() {\n    return require(\"./ExtendedAPIPlugin\");\n  },\n  ExternalsPlugin: function ExternalsPlugin() {\n    return require(\"./ExternalsPlugin\");\n  },\n  HashedModuleIdsPlugin: function HashedModuleIdsPlugin() {\n    return require(\"./HashedModuleIdsPlugin\");\n  },\n  HotModuleReplacementPlugin: function HotModuleReplacementPlugin() {\n    return require(\"./HotModuleReplacementPlugin\");\n  },\n  IgnorePlugin: function IgnorePlugin() {\n    return require(\"./IgnorePlugin\");\n  },\n  LibraryTemplatePlugin: function LibraryTemplatePlugin() {\n    return require(\"./LibraryTemplatePlugin\");\n  },\n  LoaderOptionsPlugin: function LoaderOptionsPlugin() {\n    return require(\"./LoaderOptionsPlugin\");\n  },\n  LoaderTargetPlugin: function LoaderTargetPlugin() {\n    return require(\"./LoaderTargetPlugin\");\n  },\n  MemoryOutputFileSystem: function MemoryOutputFileSystem() {\n    return require(\"./MemoryOutputFileSystem\");\n  },\n  Module: function Module() {\n    return require(\"./Module\");\n  },\n  ModuleFilenameHelpers: function ModuleFilenameHelpers() {\n    return require(\"./ModuleFilenameHelpers\");\n  },\n  NamedChunksPlugin: function NamedChunksPlugin() {\n    return require(\"./NamedChunksPlugin\");\n  },\n  NamedModulesPlugin: function NamedModulesPlugin() {\n    return require(\"./NamedModulesPlugin\");\n  },\n  NoEmitOnErrorsPlugin: function NoEmitOnErrorsPlugin() {\n    return require(\"./NoEmitOnErrorsPlugin\");\n  },\n  NormalModuleReplacementPlugin: function NormalModuleReplacementPlugin() {\n    return require(\"./NormalModuleReplacementPlugin\");\n  },\n  PrefetchPlugin: function PrefetchPlugin() {\n    return require(\"./PrefetchPlugin\");\n  },\n  ProgressPlugin: function ProgressPlugin() {\n    return require(\"./ProgressPlugin\");\n  },\n  ProvidePlugin: function ProvidePlugin() {\n    return require(\"./ProvidePlugin\");\n  },\n  SetVarMainTemplatePlugin: function SetVarMainTemplatePlugin() {\n    return require(\"./SetVarMainTemplatePlugin\");\n  },\n  SingleEntryPlugin: function SingleEntryPlugin() {\n    return require(\"./SingleEntryPlugin\");\n  },\n  SourceMapDevToolPlugin: function SourceMapDevToolPlugin() {\n    return require(\"./SourceMapDevToolPlugin\");\n  },\n  Stats: function Stats() {\n    return require(\"./Stats\");\n  },\n  Template: function Template() {\n    return require(\"./Template\");\n  },\n  UmdMainTemplatePlugin: function UmdMainTemplatePlugin() {\n    return require(\"./UmdMainTemplatePlugin\");\n  },\n  WatchIgnorePlugin: function WatchIgnorePlugin() {\n    return require(\"./WatchIgnorePlugin\");\n  }\n});\nexportPlugins(exports.dependencies = {}, {\n  DependencyReference: function DependencyReference() {\n    return require(\"./dependencies/DependencyReference\");\n  }\n});\nexportPlugins(exports.optimize = {}, {\n  AggressiveMergingPlugin: function AggressiveMergingPlugin() {\n    return require(\"./optimize/AggressiveMergingPlugin\");\n  },\n  AggressiveSplittingPlugin: function AggressiveSplittingPlugin() {\n    return require(\"./optimize/AggressiveSplittingPlugin\");\n  },\n  ChunkModuleIdRangePlugin: function ChunkModuleIdRangePlugin() {\n    return require(\"./optimize/ChunkModuleIdRangePlugin\");\n  },\n  LimitChunkCountPlugin: function LimitChunkCountPlugin() {\n    return require(\"./optimize/LimitChunkCountPlugin\");\n  },\n  MinChunkSizePlugin: function MinChunkSizePlugin() {\n    return require(\"./optimize/MinChunkSizePlugin\");\n  },\n  ModuleConcatenationPlugin: function ModuleConcatenationPlugin() {\n    return require(\"./optimize/ModuleConcatenationPlugin\");\n  },\n  OccurrenceOrderPlugin: function OccurrenceOrderPlugin() {\n    return require(\"./optimize/OccurrenceOrderPlugin\");\n  },\n  OccurrenceModuleOrderPlugin: function OccurrenceModuleOrderPlugin() {\n    return require(\"./optimize/OccurrenceModuleOrderPlugin\");\n  },\n  OccurrenceChunkOrderPlugin: function OccurrenceChunkOrderPlugin() {\n    return require(\"./optimize/OccurrenceChunkOrderPlugin\");\n  },\n  RuntimeChunkPlugin: function RuntimeChunkPlugin() {\n    return require(\"./optimize/RuntimeChunkPlugin\");\n  },\n  SideEffectsFlagPlugin: function SideEffectsFlagPlugin() {\n    return require(\"./optimize/SideEffectsFlagPlugin\");\n  },\n  SplitChunksPlugin: function SplitChunksPlugin() {\n    return require(\"./optimize/SplitChunksPlugin\");\n  }\n});\nexportPlugins(exports.web = {}, {\n  FetchCompileWasmTemplatePlugin: function FetchCompileWasmTemplatePlugin() {\n    return require(\"./web/FetchCompileWasmTemplatePlugin\");\n  },\n  JsonpTemplatePlugin: function JsonpTemplatePlugin() {\n    return require(\"./web/JsonpTemplatePlugin\");\n  }\n});\nexportPlugins(exports.webworker = {}, {\n  WebWorkerTemplatePlugin: function WebWorkerTemplatePlugin() {\n    return require(\"./webworker/WebWorkerTemplatePlugin\");\n  }\n});\nexportPlugins(exports.node = {}, {\n  NodeTemplatePlugin: function NodeTemplatePlugin() {\n    return require(\"./node/NodeTemplatePlugin\");\n  },\n  ReadFileCompileWasmTemplatePlugin: function ReadFileCompileWasmTemplatePlugin() {\n    return require(\"./node/ReadFileCompileWasmTemplatePlugin\");\n  }\n});\nexportPlugins(exports.debug = {}, {\n  ProfilingPlugin: function ProfilingPlugin() {\n    return require(\"./debug/ProfilingPlugin\");\n  }\n});\nexportPlugins(exports.util = {}, {\n  createHash: function createHash() {\n    return require(\"./util/createHash\");\n  }\n});\n\nvar defineMissingPluginError = function defineMissingPluginError(namespace, pluginName, errorMessage) {\n  Object.defineProperty(namespace, pluginName, {\n    configurable: false,\n    enumerable: true,\n    get: function get() {\n      throw new RemovedPluginError(errorMessage);\n    }\n  });\n}; // TODO remove in webpack 5\n\n\ndefineMissingPluginError(exports.optimize, \"UglifyJsPlugin\", \"webpack.optimize.UglifyJsPlugin has been removed, please use config.optimization.minimize instead.\"); // TODO remove in webpack 5\n\ndefineMissingPluginError(exports.optimize, \"CommonsChunkPlugin\", \"webpack.optimize.CommonsChunkPlugin has been removed, please use config.optimization.splitChunks instead.\");","map":null,"metadata":{},"sourceType":"module"}